# ArchFusion OS - Configuration d'Installation
# Auteur: Jimmy Ramsamynaick
# Version: 1.0.0

# ==========================================
# CONFIGURATION GÉNÉRALE
# ==========================================

# Nom de la distribution
DISTRO_NAME="ArchFusion OS"
DISTRO_VERSION="1.0.0"
DISTRO_CODENAME="Fusion"

# URLs et dépôts
ARCHFUSION_REPO="https://github.com/JimmyRamsamynaick/ArchFusion.git"
MIRROR_COUNTRY="France,Germany,Netherlands"

# ==========================================
# CONFIGURATION SYSTÈME PAR DÉFAUT
# ==========================================

# Localisation
DEFAULT_TIMEZONE="Europe/Paris"
DEFAULT_LOCALE="fr_FR.UTF-8"
DEFAULT_KEYMAP="fr"
DEFAULT_HOSTNAME="archfusion"

# Utilisateur par défaut
DEFAULT_SHELL="/bin/zsh"
DEFAULT_GROUPS="wheel,audio,video,optical,storage,network,power"

# ==========================================
# PARTITIONNEMENT
# ==========================================

# Tailles des partitions (en MB)
EFI_SIZE=512
BOOT_SIZE=1024
DEFAULT_SWAP_SIZE=4096  # 4GB

# Système de fichiers
EFI_FS="fat32"
BOOT_FS="ext4"
ROOT_FS="ext4"

# Options de formatage
EXT4_OPTIONS="-F -O ^64bit"
FAT32_OPTIONS="-F32"

# ==========================================
# PAQUETS À INSTALLER
# ==========================================

# Système de base
BASE_PACKAGES=(
    "base"
    "base-devel"
    "linux"
    "linux-firmware"
    "linux-headers"
    "networkmanager"
    "grub"
    "efibootmgr"
    "os-prober"
    "intel-ucode"
    "amd-ucode"
)

# Outils système essentiels
SYSTEM_PACKAGES=(
    "git"
    "vim"
    "nano"
    "sudo"
    "zsh"
    "fish"
    "bash-completion"
    "zsh-completions"
    "man-db"
    "man-pages"
    "texinfo"
    "which"
    "wget"
    "curl"
    "rsync"
    "unzip"
    "zip"
    "tar"
    "gzip"
    "htop"
    "neofetch"
    "tree"
    "lsof"
    "strace"
    "tcpdump"
    "nmap"
    "iperf3"
)

# Environnement de bureau KDE
KDE_PACKAGES=(
    "plasma-meta"
    "kde-applications-meta"
    "sddm"
    "sddm-kcm"
    "plasma-wayland-session"
    "xorg-server"
    "xorg-apps"
    "xorg-xinit"
)

# Applications essentielles
ESSENTIAL_APPS=(
    "firefox"
    "chromium"
    "kitty"
    "alacritty"
    "dolphin"
    "kate"
    "kwrite"
    "konsole"
    "spectacle"
    "gwenview"
    "okular"
    "ark"
    "kdeconnect"
    "kcalc"
    "kcharselect"
    "kcolorchooser"
    "kruler"
    "kfind"
)

# Multimédia
MULTIMEDIA_PACKAGES=(
    "pipewire"
    "pipewire-alsa"
    "pipewire-pulse"
    "pipewire-jack"
    "wireplumber"
    "pavucontrol"
    "alsa-utils"
    "pulseaudio-bluetooth"
    "vlc"
    "mpv"
    "audacity"
    "gimp"
    "inkscape"
    "blender"
    "obs-studio"
)

# Développement
DEV_PACKAGES=(
    "code"
    "git"
    "github-cli"
    "docker"
    "docker-compose"
    "nodejs"
    "npm"
    "python"
    "python-pip"
    "python-virtualenv"
    "go"
    "rust"
    "jdk-openjdk"
    "maven"
    "gradle"
    "cmake"
    "make"
    "gcc"
    "clang"
    "gdb"
    "valgrind"
)

# Polices
FONT_PACKAGES=(
    "ttf-dejavu"
    "ttf-liberation"
    "ttf-roboto"
    "ttf-opensans"
    "noto-fonts"
    "noto-fonts-emoji"
    "noto-fonts-cjk"
    "ttf-fira-code"
    "ttf-jetbrains-mono"
    "adobe-source-code-pro-fonts"
    "ttf-cascadia-code"
)

# Thèmes et icônes
THEME_PACKAGES=(
    "papirus-icon-theme"
    "arc-gtk-theme"
    "materia-gtk-theme"
    "kvantum-qt5"
    "latte-dock"
    "plasma-browser-integration"
)

# ==========================================
# SERVICES À ACTIVER
# ==========================================

ENABLED_SERVICES=(
    "NetworkManager"
    "sddm"
    "bluetooth"
    "cups"
    "fstrim.timer"
    "systemd-timesyncd"
    "firewalld"
)

# Services optionnels (désactivés par défaut)
OPTIONAL_SERVICES=(
    "sshd"
    "docker"
    "libvirtd"
    "apache"
    "nginx"
    "mysql"
    "postgresql"
)

# ==========================================
# CONFIGURATION RÉSEAU
# ==========================================

# DNS par défaut
DEFAULT_DNS="1.1.1.1,8.8.8.8"

# Configuration WiFi
WIFI_REGULATORY_DOMAIN="FR"

# ==========================================
# SÉCURITÉ
# ==========================================

# Pare-feu
FIREWALL_ENABLED=true
FIREWALL_DEFAULT_ZONE="public"

# SSH (désactivé par défaut)
SSH_ENABLED=false
SSH_PORT=22
SSH_ROOT_LOGIN=false
SSH_PASSWORD_AUTH=false

# Sudo
SUDO_TIMEOUT=15  # minutes
SUDO_LECTURE=true

# ==========================================
# OPTIMISATIONS SYSTÈME
# ==========================================

# Swappiness (0-100, plus bas = moins de swap)
SWAPPINESS=10

# I/O Scheduler
IO_SCHEDULER="mq-deadline"

# CPU Governor
CPU_GOVERNOR="performance"

# Kernel parameters
KERNEL_PARAMS=(
    "quiet"
    "splash"
    "loglevel=3"
    "rd.systemd.show_status=auto"
    "rd.udev.log_level=3"
)

# ==========================================
# CONFIGURATION GRUB
# ==========================================

GRUB_DISTRIBUTOR="ArchFusion"
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash loglevel=3"
GRUB_TIMEOUT=5
GRUB_THEME_PATH="/usr/share/grub/themes/archfusion"

# ==========================================
# HOOKS PERSONNALISÉS
# ==========================================

# Scripts à exécuter avant l'installation
PRE_INSTALL_HOOKS=(
    "check_hardware"
    "update_mirrors"
    "sync_time"
)

# Scripts à exécuter après l'installation
POST_INSTALL_HOOKS=(
    "configure_themes"
    "setup_dotfiles"
    "optimize_system"
    "create_recovery"
)

# ==========================================
# CONFIGURATION MATÉRIELLE
# ==========================================

# Support GPU
NVIDIA_SUPPORT=true
AMD_SUPPORT=true
INTEL_SUPPORT=true

# Paquets GPU NVIDIA
NVIDIA_PACKAGES=(
    "nvidia"
    "nvidia-utils"
    "nvidia-settings"
    "cuda"
    "opencl-nvidia"
)

# Paquets GPU AMD
AMD_PACKAGES=(
    "xf86-video-amdgpu"
    "vulkan-radeon"
    "libva-mesa-driver"
    "mesa-vdpau"
    "opencl-mesa"
)

# Paquets GPU Intel
INTEL_PACKAGES=(
    "xf86-video-intel"
    "vulkan-intel"
    "intel-media-driver"
    "libva-intel-driver"
    "intel-compute-runtime"
)

# ==========================================
# CONFIGURATION BLUETOOTH
# ==========================================

BLUETOOTH_ENABLED=true
BLUETOOTH_PACKAGES=(
    "bluez"
    "bluez-utils"
    "bluedevil"
    "pulseaudio-bluetooth"
)

# ==========================================
# CONFIGURATION IMPRESSION
# ==========================================

PRINTING_ENABLED=true
PRINTING_PACKAGES=(
    "cups"
    "cups-pdf"
    "ghostscript"
    "gsfonts"
    "gutenprint"
    "system-config-printer"
    "print-manager"
)

# ==========================================
# VIRTUALISATION
# ==========================================

VIRTUALIZATION_ENABLED=false
VIRTUALIZATION_PACKAGES=(
    "qemu"
    "libvirt"
    "virt-manager"
    "dnsmasq"
    "bridge-utils"
    "openbsd-netcat"
)

# ==========================================
# GAMING
# ==========================================

GAMING_ENABLED=false
GAMING_PACKAGES=(
    "steam"
    "lutris"
    "wine"
    "winetricks"
    "gamemode"
    "lib32-mesa"
    "lib32-vulkan-radeon"
    "lib32-vulkan-intel"
    "lib32-nvidia-utils"
)

# ==========================================
# CONFIGURATION AVANCÉE
# ==========================================

# Compression initramfs
INITRAMFS_COMPRESSION="zstd"

# Modules du noyau à charger
KERNEL_MODULES=(
    "kvm"
    "kvm_intel"
    "kvm_amd"
    "vfio"
    "vfio_pci"
)

# Modules à blacklister
BLACKLISTED_MODULES=(
    "pcspkr"
    "snd_pcsp"
)

# ==========================================
# CHEMINS ET RÉPERTOIRES
# ==========================================

# Répertoires de configuration
CONFIG_DIR="/etc/archfusion"
THEMES_DIR="/usr/share/archfusion/themes"
WALLPAPERS_DIR="/usr/share/archfusion/wallpapers"
SCRIPTS_DIR="/usr/share/archfusion/scripts"

# Répertoires utilisateur
USER_CONFIG_DIR=".config/archfusion"
USER_THEMES_DIR=".local/share/archfusion/themes"
USER_WALLPAPERS_DIR=".local/share/archfusion/wallpapers"

# ==========================================
# LOGGING
# ==========================================

LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_FILE="/var/log/archfusion-install.log"
LOG_MAX_SIZE="10M"
LOG_ROTATE_COUNT=5

# ==========================================
# MISE À JOUR ET MAINTENANCE
# ==========================================

# Miroirs Arch Linux
MIRROR_UPDATE_ENABLED=true
MIRROR_UPDATE_COUNTRIES="France,Germany,Netherlands,United Kingdom"

# Nettoyage automatique
AUTO_CLEAN_ENABLED=true
AUTO_CLEAN_CACHE_DAYS=30
AUTO_CLEAN_LOGS_DAYS=90

# Snapshots système (si Btrfs)
SNAPSHOTS_ENABLED=false
SNAPSHOTS_RETENTION_DAILY=7
SNAPSHOTS_RETENTION_WEEKLY=4
SNAPSHOTS_RETENTION_MONTHLY=6

# ==========================================
# PERSONNALISATION
# ==========================================

# Thème par défaut
DEFAULT_THEME="ArchFusion-Dark"
DEFAULT_ICON_THEME="Papirus-Dark"
DEFAULT_CURSOR_THEME="Breeze"

# Wallpaper par défaut
DEFAULT_WALLPAPER="archfusion-default.jpg"

# Configuration du dock
DOCK_ENABLED=true
DOCK_POSITION="bottom"
DOCK_SIZE=48

# ==========================================
# DÉVELOPPEMENT ET DEBUG
# ==========================================

# Mode debug
DEBUG_MODE=false
VERBOSE_OUTPUT=false

# Sauvegarde de configuration
BACKUP_CONFIG=true
BACKUP_DIR="/var/backups/archfusion"

# Test mode (simulation sans modifications réelles)
TEST_MODE=false